<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Welcome to Our Gallery</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body, html {
      margin: 0;
      height: 100%;
      overflow: hidden;
      font-family: Arial, sans-serif;
    }
    .welcome-bg {
      background: hsl(340, 70%, 85%);
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      color: #fff;
      text-align: center;
    }
    .button-group button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
  </style>
</head>
<body class="welcome-bg">
  <canvas id="heart-canvas"></canvas>

  <div class="welcome-container">
    <h1>Welcome to Our Gallery ðŸ’–</h1>
    <p id="typed-text"></p>
    <div class="button-group">
      <button onclick="changeColors()">Change Colors ðŸŽ¨</button>
      <a href="gallery.html"><button>Enter Your Story âœ¨</button></a>
    </div>
  </div>

  <audio id="bg-music" loop>
    <source src="images/Surili Akhiyon Wale (Lyrics)_Veer_Salman Khan_Zarine Khan_Rahat Fateh Ali Khan_(MP3_70K).mp3" type="audio/mp3">
  </audio>

  <script>
    // -------------------- Autoplay music and skip 15 sec --------------------
    const music = document.getElementById('bg-music');
    music.volume = 0.3;
    music.currentTime = 15; // skip first 15 seconds

    // Try autoplay
    function playMusic() {
      music.play().catch(() => {
        // If blocked, mute first and try again
        music.muted = true;
        music.play().then(() => music.muted = false);
      });
    }

    window.addEventListener('load', playMusic);

    // -------------------- Background color --------------------
    function changeColors() {
      document.body.style.background = `hsl(${Math.floor(Math.random()*360)}, 70%, 85%)`;
    }

    // -------------------- Typing effect --------------------
    const text = "Every moment with you is a treasure worth keeping...";
    let i = 0;
    function typeWriter() {
      if (i < text.length) {
        document.getElementById("typed-text").innerHTML = text.substring(0, i+1);
        i++;
        setTimeout(typeWriter, 50);
      } else {
        setTimeout(() => {
          i = 0;
          document.getElementById("typed-text").innerHTML = "";
          typeWriter();
        }, 5000);
      }
    }
    window.addEventListener('load', typeWriter);

    // -------------------- Heart animation --------------------
    function hearts() {
      const canvas = document.getElementById("heart-canvas");
      const ctx = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      window.addEventListener("resize", () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      });

      const heartsArr = Array.from({length:60}, () => ({
        x: Math.random()*canvas.width,
        y: Math.random()*canvas.height,
        size: Math.random()*10 + 5,
        speed: Math.random()*1 + 0.5,
        opacity: Math.random()
      }));

      function drawHeart(x,y,size,opacity){
        ctx.save();
        ctx.translate(x,y);
        ctx.scale(size/15, size/15);
        ctx.beginPath();
        ctx.globalAlpha = opacity;
        ctx.moveTo(0,0);
        ctx.bezierCurveTo(0,-3,-5,-15,-15,-15);
        ctx.bezierCurveTo(-35,-15,-35,10,-35,10);
        ctx.bezierCurveTo(-35,25,-20,40,0,55);
        ctx.bezierCurveTo(20,40,35,25,35,10);
        ctx.bezierCurveTo(35,10,35,-15,15,-15);
        ctx.bezierCurveTo(5,-15,0,-3,0,0);
        ctx.fillStyle = "#ff5e99";
        ctx.fill();
        ctx.restore();
      }

      function animate() {
        ctx.clearRect(0,0,canvas.width,canvas.height);
        heartsArr.forEach(h => {
          drawHeart(h.x,h.y,h.size,h.opacity);
          h.y -= h.speed;
          if(h.y < -50) h.y = canvas.height + 50;
        });
        requestAnimationFrame(animate);
      }

      animate();
    }
    window.addEventListener('load', hearts);
  </script>
</body>
</html>
